<div id="soundHint" style="display: none; color: red; margin-top: 10px;">
    请点击页面以启用音效！
</div>

<script>
    class LoveThermometer {
        constructor() {
            // ...其他代码
            this.soundHint = document.getElementById("soundHint");
            this.isSoundEnabled = false;
            this.initEventListeners();
        }

        initEventListeners() {
            // 在用户第一次点击时启用音效
            document.addEventListener("click", () => {
                if (!this.isSoundEnabled) {
                    this.isSoundEnabled = true;
                    this.soundHint.style.display = "none";
                    this.playSound(); // 测试音效
                }
            });

            this.actionBtn.addEventListener("click", () => this.nextTask());
            this.restartBtn.addEventListener("click", () => this.restartGame());
            this.addTaskBtn.addEventListener("click", () => this.addCustomTask());
            this.customTaskInput.addEventListener("input", () => this.validateInput());
        }

        playSound() {
            if (!this.isSoundEnabled) {
                this.soundHint.style.display = "block";
                return;
            }
            const sound = new Audio("https://www.soundjay.com/button/sounds/button-3.mp3");
            sound.play().catch(() => {
                console.log("音效播放失败，请与页面交互后重试。");
            });
        }
    }

    // 初始化游戏
    const game = new LoveThermometer();
</script>
